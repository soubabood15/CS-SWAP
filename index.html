<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“… Ù†Ø¸Ø§Ù… ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´ÙØªØ§Øª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 400px;
      margin: 50px auto;
      padding: 20px;
      background: #f0f2f5;
      text-align: center;
    }
    .card {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,.1);
      position: relative;
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 16px;
    }
    button {
      background: #2980B9;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }
    button:hover { background: #1f6390; }

    /* Ø¯ÙˆØ±Ø§Ù† */
    @keyframes rotate {
      0%   { transform: rotate(0deg); }
      25%  { transform: rotate(10deg); }
      50%  { transform: rotate(-10deg); }
      75%  { transform: rotate(10deg); }
      100% { transform: rotate(0deg); }
    }
    .rotate {
      animation: rotate 0.6s infinite;
      background: #e74c3c !important;
    }
  </style>
</head>
<body>
  <h1>ğŸ”‘ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</h1>
  <div class="card">
    <input type="email" id="email" placeholder="Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„" />
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
    <button id="btnLogin">Ø¯Ø®ÙˆÙ„</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB_EMe5vTzJHdvxH8ooRYgLCQdWZFgvsgQ",
      authDomain: "swap-8005b.firebaseapp.com",
      projectId: "swap-8005b",
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const btnLogin = document.getElementById("btnLogin");
    const emailEl = document.getElementById("email");
    let wrongMode = false;

    // ğŸ”¹ Ø´Ø±Ø· Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† (@csmena.com)
    emailEl.addEventListener("input", () => {
      if (!emailEl.value.toLowerCase().endsWith("@csmena.com")) {
        btnLogin.classList.add("rotate");
      } else {
        btnLogin.classList.remove("rotate");
      }
    });

    // ğŸ”¹ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
    btnLogin.addEventListener("click", async () => {
      const email = emailEl.value;
      const pass = document.getElementById("password").value;

      // Ù„Ùˆ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ† Ù…Ùˆ ØµØ­ÙŠØ­ Ù…Ø§ ÙŠØ­Ø§ÙˆÙ„ ÙŠØ¯Ø®Ù„
      if (!email.toLowerCase().endsWith("@csmena.com")) {
        return;
      }

      try {
        await signInWithEmailAndPassword(auth, email, pass);
        alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„");
        wrongMode = false;
        btnLogin.style.position = "relative";
        btnLogin.style.left = "0px";
        btnLogin.style.top = "0px";
      } catch (err) {
        wrongMode = true;
        btnLogin.style.position = "absolute";
      }
    });

    // ğŸ”¹ Ø­Ø±ÙƒØ© Ø§Ù„Ù‡Ø±ÙˆØ¨ ğŸ˜‚
    btnLogin.addEventListener("mouseover", () => {
      if (!wrongMode) return;
      const x = Math.floor(Math.random() * 200) - 100;
      const y = Math.floor(Math.random() * 100) - 50;
      btnLogin.style.left = `${x}px`;
      btnLogin.style.top = `${y}px`;
    });
  </script>
</body>
</html>
